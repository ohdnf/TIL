# Chapter 1: Node.js Design Fundamentals

학습 내용

- Node.js 철학
- 리액터(reactor) 패턴
- 콜백(callback) 패턴
- 모듈(module) 시스템과 패턴
- 옵저버(observer) 패턴과 Node.js의 화신: `EventEmitter` 클래스

## Node.js 철학

### Small core

- Node.js 코어는 여러 원칙들에 기반해 만들어졌는데, 그 중 하나는 코어를 가능한 한 가장 최소한으로 만들고, 나머지를 코어 외적인 모듈 생태계인 **userland(또는 userspace)**에 맡기는 것입니다.
- 이 원칙은 Node.js 커뮤니티로 하여금 안정화에 초점을 둔 하나의 솔루션에 집중하는 것이 아닌, 여러 솔루션을 실험할 수 있게 합니다.
- 코어 기능을 최소화하는 것은 유지 관리를 쉽게 하면서 동시에 전체 생태계를 진화시키는데 긍정적인 영향을 줄 수 있습니다.

### Small modules

- Node.js는 *모듈(module)*이라는 개념을 사용하는데 이는 프로그램 코드를 의미합니다.
- 모듈은 *패키지(package)*라고도 불리는 재사용 가능한 라이브러리입니다.
- Node.js에서 가장 전파된 원칙 중 하나는 스코프 차원에서 가능한 작은 모듈을 만드는 것입니다.
- 이 원칙은 Unix에서 왔는데, 정확하게는 아래 두 가지 원칙입니다.
  - 작은 것이 아름답다.
  - 모든 프로그램은 하나만 잘하면 된다.
- 공식 패키지 매니저인 `npm`과 함께 Node.js는 각 패키지가 고유의 의존성을 가지도록 함으로써 _의존성 지옥(dependency hell)_ 문제를 풀고자 했습니다.
- 이를 통해 Node.js에서는 아무리 많은 패키지를 설치해도 충돌이 일어나지 않습니다.
- Node적인 방식에는 잘게 분화된 의존성으로 구성된 애플리케이션의 극단적인 재사용성이 포함되어 있습니다.
- 다른 플랫폼에서 받아들여지기 힘들 수 있는 이러한 방식 덕에 Node.js에서는 100줄도 안되는 코드를 가진 패키지나 단 하나의 기능만을 제공하는 패키지들을 심심치 않게 찾아볼 수 있습니다.
- 작은 모듈은 재사용성 측면에서의 장점 외에 아래 측면도 포함하고 있습니다.
  - 쉽게 이해할 수 있고 쓰기 편하다.
  - 테스트하고 관리하기 편하다.
  - 브라우저와 공유하기 좋다.
- 작고 한 가지 기능에 집중한 모듈은 모두에게 아무리 작은 코드여도 공유하고 재사용하도록 합니다. DRY 원칙이 새로운 차원에서 적용된 것입니다.

## Small surface area

- Node.js 모듈은 기능 노출을 최소한으로 한다는 특징도 지니고 있습니다.
- 이는 API로 하여금 이상한 곳에 사용되는 것을 막음으로써 API 사용성을 증가시킵니다.
- 대부분의 사용자는 특정 기능들에만 관심이 있으며 기능을 확장하거나 더 깊은 측면을 고려하지 않습니다.
- Node.js에서 모듈은 흔히 단 하나의 기능(함수나 생성자)만을 노출시키고, 다른 확장적 성격의 기능들은 노출된 기능의 속성으로 포함시킵니다.
- 이러한 방식은 사용자로 하여금 무엇이 중요 기능이고 부가 기능인지 구분할 수 있게 해줍니다.
- 이로써 모듈은 단 하나의 분명한 엔트리 포인트(entry point)를 갖게 됩니다.

## Simplicity and pragmatism

- Keep It Simple, Stupid (KISS)

> _"Simplicity is the ultimate sophistication."_ > _- Leonardo da Vinci_

> _"The design must be simple, both in implementation and interface. It is more important for the implementation to be simple than the interface. Simplicity is the most important consideration in a design."_ > _- Richard P. Gabriel(The rise of worse is better)_

- 모든 기능을 갖춘 완벽한 소프트웨어보다 단순한 소프트웨어를 디자인하는 것은 여러 가지 이유에서 좋습니다.
  - 구현하기 쉽습니다.
  - 적은 자원으로 더 빠르게 운영할 수 있습니다.
  - 적응하기 쉽습니다.
  - 유지하고 이해하기 쉽습니다.
- 이러한 요소들은 커뮤니티 기여를 촉진하고 소프트웨어로 하여금 성장하고 개선될 수 있게 합니다.
- 실용적인 언어인 JavaScript 또한 이러한 원칙을 지키기 쉽게 합니다.
  - 단순한 함수, 클로저(closure), 복잡한 클래스 위계를 대체한 객체 리터럴 등
- 순수한 객체 지향 디자인은 현실 세계를 컴퓨터 환경에 복제하고자 합니다. 이 과정에서 현실 세계의 불완전함, 복잡함을 고려하지 않습니다.
- 현실 세계와 거의 비슷한 소프트웨어를 만들어 거대한 코드를 유지하는 대신 간단하고 합리적인 방식으로 현실 세계를 어림 잡는 소프트웨어를 만드는 것이 더욱 효과적일 수 있습니다.
- 본 교재에서 우리는 이러한 원칙이 실제로 얼마나 단순하고 실용적인 접근을 통해 구체화되었는지 확인하게 될 것입니다.
