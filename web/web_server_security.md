# 웹 서버 보안

> 소프트웨어 보안 감사?
>
> 1단계는 서버 IP만 가지고 시작, 단계별 시나리오에 따라 공격 진행



## 유저 권한은 필요한 만큼만

- 유관 부서 계정의 권한은 매우 제한적
- 유관 부서용 폴더의 Read/Write 권한만 존재 => 시스템이나 DB에 영향을 미칠 수 없는 구조
- 기본적으로 root 유저로 프로세스를 실행해서는 안되고 사용하는 목적에 맞게 유저 권한을 분리해야 한다.
- 웹 서버를 root 유저로 실행할 경우 해당 프로세스가 실행하는 명령은 모두 root 권한으로 실행이 된다.
- WAS를 was 유저로 실행



## Privilege Escalation

- 낮은 권한을 가진 사용자에서 시작해서 높은 권한을 가진 사용자까지 권한을 높이는 공격 방법
- 주로 운영 체제의 보안 취약점을 이용
- 흔히 '쉘 따기'라고 부름
- 오래된 운영 체제를 사용하고 있다면 너무나 쉽게 공격을 받을 수 있다.
- 개발자 입장에서는 운영 체제를 최신화하는 일이 매우 귀찮고 피곤한 일이지만 그냥 두게 되면 잠재적 폭탄을 방치하는 것과 같다.



## ACL(Access Control List)

- 접근 제어 목록(Whitelist)
- 허용하는 IP에 대해서만 접근을 허용한다.(허용되지 않은 모든 통로는 막혀있다)
- inbound 뿐만 아니라 outbound도 매우 중요함(데이터는 결국 **바깥으로** 나간다)
- inbound가 열려있고, 공격자가 심은 파일이 서버에서 동작한다 하더라도 outbound만 제대로 막아두었다면 정보가 외부로 유출되지 않는다.
- 중요한 고객 데이터 등은 사내에서도 허가 받은 IP로만 접근 가능하도록 제한해야 한다.
  - 현장 데이터에 접근하기 위해서는 사전에 신청을 하고 결재를 받은 뒤에 제한된 출입 구역에 들어가서 접속

### 예시

- AWS - security group rules
- Ubuntu - Uncomplicated Firewall(UFW)



## 인증(Authentication)과 인가(Authorization)

### 인증

- 유저가 누구인지 확인하는 절차
- 클라이언트가 자신이 주장하는 사용자와 같은 사용자인가?

### 인가

- 유저에 대한 권한을 허락하는 것
- 클라이언트가 하고자 하는 작업이 해당 클라이언트에게 허가된 작업인가?

